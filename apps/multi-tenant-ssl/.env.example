# =================================
# Multi-Tenant SSL Configuration
# =================================
# This app uses the shared PostgreSQL and Redis from the monorepo.
# Make sure to run the root docker-compose first:
#   cd ../../ && docker-compose up -d postgres redis

# Server
PORT=3000
NODE_ENV=development

# =================================
# Database (Shared Monorepo DB)
# =================================
# Uses the same PostgreSQL instance as other frameX apps.
# Default credentials match the root docker-compose.

# For Docker:
DATABASE_URL="postgresql://framex:framex_secret@framex-postgres:5432/framex?schema=public"

# For local development (when running outside Docker):
# DATABASE_URL="postgresql://framex:framex_secret@localhost:5432/framex?schema=public"

# =================================
# Redis (Shared Monorepo Redis)
# =================================
# Uses the same Redis instance as other frameX apps.

# For Docker:
REDIS_URL="redis://framex-redis:6379"

# For local development (when running outside Docker):
# REDIS_URL="redis://localhost:6379"

# =================================
# ACME / Let's Encrypt Settings
# =================================

# Email for certificate notifications
ACME_EMAIL=admin@yourdomain.com

# ACME Directory (use staging for testing)
# Production: https://acme-v02.api.letsencrypt.org/directory
# Staging: https://acme-staging-v02.api.letsencrypt.org/directory
ACME_DIRECTORY=https://acme-staging-v02.api.letsencrypt.org/directory

# Path to acme.sh installation
ACME_HOME=/root/.acme.sh

# =================================
# Nginx Configuration
# =================================

# Path to nginx sites-enabled directory
NGINX_SITES_PATH=/etc/nginx/sites-enabled

# Path to nginx binary
NGINX_BIN=/usr/sbin/nginx

# Path to store SSL certificates
SSL_CERT_PATH=/etc/ssl/tenants

# Path for ACME webroot challenges
ACME_WEBROOT=/var/www/acme

# =================================
# Cloudflare (Required for Wildcard SSL)
# =================================
# Cloudflare is REQUIRED for wildcard certificates (*.framextech.com)
# because Let's Encrypt requires DNS-01 challenge for wildcards.

# Cloudflare API Token
# Get from: https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone:DNS:Edit
CLOUDFLARE_API_TOKEN=

# Cloudflare Zone ID
# Find in your domain's Overview page on Cloudflare dashboard
CLOUDFLARE_ZONE_ID=

# For the issue-wildcard.sh script, also set these:
# export CF_Token="$CLOUDFLARE_API_TOKEN"
# export CF_Zone_ID="$CLOUDFLARE_ZONE_ID"

# =================================
# API Security
# =================================

# API Key for internal service calls
API_KEY=your-secure-api-key-here

# JWT Secret for admin authentication
JWT_SECRET=your-jwt-secret-here

# =================================
# Monitoring
# =================================

# Days before expiry to trigger renewal
CERT_RENEWAL_DAYS=30

# Enable Slack notifications
SLACK_WEBHOOK_URL=

# Enable email notifications
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
NOTIFICATION_EMAIL=
